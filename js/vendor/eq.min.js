!function(e){"use strict";function t(){this.nodes=[],this.eqsLength=0,this.widths=[],this.points=[],this.callback=void 0}function o(e,t,o){e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent("on"+t,function(){return o.call(e,window.event)})}function n(e){return window.getComputedStyle(e,":before").getPropertyValue("content").slice(1,-1)}var r=function(e,t){return[].slice.call(e).concat([].slice.call(t))};t.prototype.query=function(t,o){var r,i=Object.getPrototypeOf(e);o&&"function"==typeof o&&(i.callback=o),t&&"number"!=typeof t?r=t.length:(t=i.nodes,r=i.nodesLength);var s,a=[],u=[];for(s=0;r>s;s++){a.push(t[s].offsetWidth);try{u.push(i.sortObj(t[s].getAttribute("data-eq-pts")))}catch(d){try{u.push(i.sortObj(n(t[s])))}catch(c){u.push([{key:"",value:0}])}}}i.widths=a,i.points=u,t&&"number"!=typeof t?i.nodeWrites(t,a,u):o&&"function"!=typeof o?i.nodeWrites():window.requestAnimationFrame(i.nodeWrites)},t.prototype.nodeWrites=function(t){var o,n,r,i=Object.getPrototypeOf(e),s=i.widths,a=i.points;for(t&&"number"!=typeof t?n=t.length:(t=i.nodes,n=i.nodesLength),o=0;n>o;o++){var u=s[o],d=t[o],c=a[o],l=c.length;if(u<c[0].value)d.removeAttribute("data-eq-state");else if(u>=c[l-1].value)d.setAttribute("data-eq-state",c[l-1].key);else for(var f=0;l>f;f++){var p=c[f],h=c[f+1];if(0===f&&u<p.value){d.removeAttribute("data-eq-state");break}if(void 0===h.value){d.setAttribute("data-eq-state",h.key);break}if(u>=p.value&&u<h.value){d.setAttribute("data-eq-state",p.key);break}}}i.callback&&(r=i.callback,i.callback=void 0,r(t))},t.prototype.refreshNodes=function(){var t=Object.getPrototypeOf(e),o=[];t.nodes=document.querySelectorAll("[data-eq-pts]"),o=n(document.querySelector("html")).split(", "),o.forEach(function(e){""!==e&&(t.nodes=r(t.nodes,document.querySelectorAll(e)))}),t.nodesLength=t.nodes.length},t.prototype.sortObj=function(e){for(var t=[],o=e.split(","),n=0;n<o.length;n++){var r=o[n].split(":");t.push({key:r[0].replace(/^\s+|\s+$/g,""),value:parseFloat(r[1])})}return t.sort(function(e,t){return e.value-t.value})},e=e||new t,o(window,"DOMContentLoaded",function(){e.refreshNodes(),e.query(void 0,!0)}),o(window,"load",function(){e.refreshNodes(),e.query(void 0,!0)}),o(window,"resize",function(){e.refreshNodes(),window.requestAnimationFrame(e.query)}),"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):window.eqjs=e}(window.eqjs);